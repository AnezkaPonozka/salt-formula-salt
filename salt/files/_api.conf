{%- from "linux/map.jinja" import system with context %}
{%- from "salt/map.jinja" import api with context %}

rest_cherrypy:
  port: {{ api.bind.port }}
  host: {{ api.bind.address }}
  {%- if api.get('ssl', {}).get('enabled', False) %}
  ssl_crt: /etc/ssl/certs/{{ system.name }}.{{ system.domain }}.crt
  ssl_key: /etc/ssl/private/{{ system.name }}.{{ system.domain }}.key
  {%- else %}
  disable_ssl: True
  {%- endif %}
  {%- if api.get('debug', False) %}
  debug: True
  {%- endif %}
